e = $z.map { _1[9,96].tr '{|}', '"#!' };
crd = ->i, j {
  j<12?[i/2,2*j+i%2-12]:(a=((i*36+(j-12))*19%3384);[a/72,12+a%72])
};

94.times { |i|
  rs[s=(r=0..47).map { j,k=crd[i,_1]; e[j][k] } * ''];
  s.tr! '"#!', '{|}';
  r.map{
    j,k=crd[i,_1];
    $z[j][9+k%96]=s[_1]
  }
}
